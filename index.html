    <!DOCTYPE html>  
    <html>  
      <head>  
        <title>Mario Theme Tune with JavaScript</title>
        
        <script type="text/javascript" src="ToneGenerator.js"></script>
        <script type="text/javascript" src="tune.js"></script>
          
        <link rel="stylesheet" href="../css/style.css?v=32">
	       <link rel="stylesheet" href="../css/screen.css?v=32">  
          
      </head>  
      <body>  
      
        <header>
      		<h1>My Playground <a href="http://twitter.sydlawrence.com">@sydlawrence</a></h1>
      	</header>
      	<div id="main">
      
        <h1>Mario Theme using the Audio API</h1>
        <p>Currently this only works on Firefox, but I am working on it...</p>
        <button onclick="start()">play</button>  
        <button onclick="stop()">stop</button>  
      
        <script type="text/javascript">    
    
          var currentNote = 0;
        
          var loops = 1; // does not loop (-1 = forever)
          
          var currentLoop = 0;
             
          
          var noteTimeout;
               
          function nextNote() {
                        
            duration = tune[currentNote].duration;
            type = tune[currentNote].type;

            switch (type) {
              case "beep" :
                frequency = notes[currentNote].frequency;
                break;          
              case "delay" :
                frequency = 0;
                break;
            }

            currentNote++;
            if (currentNote >= notes.length) {
              currentNote = 0;
              currentLoop++;
            }
            
            // still looping
            if (currentLoop < loops || loops === -1) {
              noteTimeout = setTimeout("nextNote()",duration);
            }
            // stop
            else {
              frequency = 0;
            }
            
          }   
      
      
          function start() {  
            currentSoundSample = 0;
            nextNote(); 
          }  
      
          function stop() {  
            pause();
            currentNote = 0;
            currentLoop = 0;
          }  
          
          function pause() {
            frequency = 0;
            clearTimeout(noteTimeout);
          }
      </script> 
      
      </div>

	<footer>
		<a href="http://sydlawrence.com">Handcrafted by Syd</a>
	</footer>
      
      <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7654450-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
       
      </body>  
    </html>  
